<div class="m-auto col-8">
    <div class="d-flex">
        <div class="form-group col-5 m-auto">
            <h2 class="display-6 tituto mt-5">Editar Procedimento</h2>
        </div>
    </div>
</div>

<form>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <input type="hidden" id="hiddenId" name="hiddenId" value="{{procedimento.id}}">
            <label><span class="text-danger">*</span>Descrição</label>
            <input type="text" class="form-control mb-3" name="descricao" id="descricao" placeholder="Procedimento.." value="{{procedimento.descricao}}" required>
        </div>
    </div>
    </div>

    <div class="d-flex m-auto">
        <div class="form-group col-1 m-auto">
            <button id="btn" type="button" class="btn btn-lg btn-primary btn-block mb-3 ">Editar</button>
        </div>
    </div>
</form>

<script>

    let btn = document.querySelector('#btn')

    btn.addEventListener('click', async () => {
        let descricao = document.querySelector('#descricao').value
        let hiddenId = document.querySelector('#hiddenId').value

        if (descricao == "") {
            return swal("Error !", "Preencha o campo Código !", "error")
        }

        const response = await fetch('/canil/editarproc/' + hiddenId, {
                method: 'POST',
                headers: {
                    "Content-Type": "application/json",
                    'Accept': 'application/json'
                },
                body: JSON.stringify({descricao, hiddenId})
            })

            if(response.status == 200){
                return swal("Sucesso !", "Descrição atualizada com sucesso!", "success")
            }

        
    })



</script>