<div class="m-auto col-8">
    <div class="d-flex">
        <div class="form-group col-3 m-auto">
            <h2 class="display-6 tituto mt-5">Editar Cliente</h2>
        </div>
    </div>
</div>

<form>
    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <input type="hidden" name="hiddenId" id="hiddenId" value="{{cliente.id}}">
            <label><span class="text-danger">*</span>Nome</label>
            <input type="text" class="form-control" name="nome" id="nome" placeholder="Nome..." value="{{cliente.nome}}" required>
        </div>
    </div>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>CPF</label>
            <input type="text" class="form-control" name="cpf" id="cpf" placeholder="CPF..." value="{{cliente.cpf}}" required>
        </div>
    </div>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>E-mail</label>
            <input type="email" class="form-control" name="email" id="email" placeholder="E-mail..." value="{{cliente.email}}" required>
        </div>
    </div>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>CEP</label>
            <input type="text" class="form-control" name="cep" id="cep" placeholder="CEP..." value="{{cliente.cep}}" required>
        </div>
    </div>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>Estado</label>
            <input type="text" class="form-control" name="uf" id="uf" placeholder="Estado..." value="{{cliente.uf}}" required>
        </div>
    </div>

     <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>Municipio</label>
            <input type="text" class="form-control" name="municipio" id="municipio" placeholder="Cidade..." value="{{cliente.municipio}}" required>
        </div>
    </div>

     <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>Bairro</label>
            <input type="text" class="form-control" name="bairro" id="bairro" placeholder="Bairro..." value="{{cliente.bairro}}" required>
        </div>
    </div>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>Endereço</label>
            <input type="text" class="form-control mb-3" name="endereco" id="endereco" placeholder="Endereço..." value="{{cliente.endereco}}" required>
        </div>
    </div>

    <div class="d-flex m-auto">
        <div class="form-group col-1 m-auto">
            <button id="btn" type="button" class="btn btn-lg btn-primary btn-block mb-3">  Editar  </button>
        </div>
    </div>
</form>

<script>

    let btn = document.querySelector('#btn')

    btn.addEventListener('click', async () => {
        let nome = document.querySelector('#nome').value
        let cpf = document.querySelector('#cpf').value
        let email = document.querySelector('#email').value
        let cep = document.querySelector('#cep').value
        let uf = document.querySelector('#uf').value
        let municipio = document.querySelector('#municipio').value
        let bairro = document.querySelector('#bairro').value
        let endereco = document.querySelector('#endereco').value
        let hiddenId = document.querySelector('#hiddenId').value

        
        if (nome == "") {
            return swal("Error !", "Preencha o campo Nome !", "error")
        }

        if (cpf == "") {
            return swal("Error !", "Preencha o campo CPF !", "error")
        }

        if (email == "") {
            return swal("Error !", "Preencha o campo E-mail !", "error")
        }

        if (cep == "") {
            return swal("Error !", "Preencha o campo CEP !", "error")
        }

        if (uf == "") {
            return swal("Error !", "Preencha o campo Estado !", "error")
        }

        if (municipio == "") {
            return swal("Error !", "Preencha o campo Municipio !", "error")
        }

        if (bairro == "") {
            return swal("Error !", "Preencha o campo Bairro !", "error")
        }

        if (endereco == "") {
            return swal("Error !", "Preencha o campo Endereço !", "error")
        }

        

        const response = await fetch('/canil/editarcliente/' + hiddenId, {
                method: 'POST',
                headers: {
                    "Content-Type": "application/json",
                    'Accept': 'application/json'
                },
                body: JSON.stringify({nome, cpf, email, cep, uf, municipio, bairro, endereco, hiddenId})
            })

            if(response.status == 200){
                return swal("Sucesso !", "Cliente atualizado com sucesso!", "success")
            }
    })



</script>