<div class="m-auto col-8">
    <div class="d-flex">
        <div class="form-group col-3 m-auto">
            <h2 class="display-6 tituto mt-5">Editar Chip</h2>
        </div>
    </div>
</div>

<form>
    <div class="form-row m-auto">
        <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <input type="hidden" name="hiddenId" id="hiddenId" value="{{chip.id}}">
            <label><span class="text-danger">*</span>Código</label>
            <input type="text" class="form-control" name="codigo" id="codigo" placeholder="Código..." value="{{chip.codigo}}" required>
        </div>
    </div>

    <div class="form-row m-auto">
        <div class="form-group col-6 m-auto">
            <label><span class="text-danger">*</span>Status</label>
            <input type="text" class="form-control mb-3" name="status" id="status" placeholder="Status.." value="{{chip.status}}" required>
        </div>
    </div>
    </div>

    <div class="d-flex m-auto">
        <div class="form-group col-1 m-auto">
            <button id="btn" type="button" class="btn btn-lg btn-primary btn-block mb-3 ">Editar</button>
        </div>
    </div>
</form>

<script>

    let btn = document.querySelector('#btn')

    btn.addEventListener('click', async () => {
        let codigo = document.querySelector('#codigo').value
        let status = document.querySelector('#status').value
        let hiddenId = document.querySelector('#hiddenId').value

        if (codigo == "") {
            return swal("Error !", "Preencha o campo Código !", "error")
        }

        if (status == "") {
            return swal("Error !", "Preencha o campo Status !", "error")
        }

        const response = await fetch('/canil/editarchip/' + hiddenId, {
                method: 'POST',
                headers: {
                    "Content-Type": "application/json",
                    'Accept': 'application/json'
                },
                body: JSON.stringify({codigo, status, hiddenId})
            })

            if(response.status == 200){
                return swal("Sucesso !", "Chip atualizado com sucesso!", "success")
            }

        
    })



</script>